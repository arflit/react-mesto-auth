[{"/home/arkady/dev/mesto-react/src/index.js":"1","/home/arkady/dev/mesto-react/src/reportWebVitals.js":"2","/home/arkady/dev/mesto-react/src/components/App.js":"3","/home/arkady/dev/mesto-react/src/components/Header.js":"4","/home/arkady/dev/mesto-react/src/components/Main.js":"5","/home/arkady/dev/mesto-react/src/components/Footer.js":"6","/home/arkady/dev/mesto-react/src/components/PopupWithForm.js":"7","/home/arkady/dev/mesto-react/src/components/ImagePopup.js":"8","/home/arkady/dev/mesto-react/src/components/Card.js":"9","/home/arkady/dev/mesto-react/src/utils/api.js":"10","/home/arkady/dev/mesto-react/src/contexts/CurrentUserContext.js":"11","/home/arkady/dev/mesto-react/src/components/EditProfilePopup.js":"12","/home/arkady/dev/mesto-react/src/components/EditAvatarPopup.js":"13","/home/arkady/dev/mesto-react/src/components/AddPlacePopup.js":"14","/home/arkady/dev/mesto-react/src/components/Login.js":"15","/home/arkady/dev/mesto-react/src/components/Register.js":"16"},{"size":603,"mtime":1614932493375,"results":"17","hashOfConfig":"18"},{"size":362,"mtime":1612357123836,"results":"19","hashOfConfig":"18"},{"size":6679,"mtime":1614932921337,"results":"20","hashOfConfig":"18"},{"size":310,"mtime":1613575309465,"results":"21","hashOfConfig":"18"},{"size":2062,"mtime":1613742273163,"results":"22","hashOfConfig":"18"},{"size":203,"mtime":1613742228683,"results":"23","hashOfConfig":"18"},{"size":913,"mtime":1613640780757,"results":"24","hashOfConfig":"18"},{"size":760,"mtime":1613575574358,"results":"25","hashOfConfig":"18"},{"size":1474,"mtime":1613742295947,"results":"26","hashOfConfig":"18"},{"size":1773,"mtime":1613639701339,"results":"27","hashOfConfig":"18"},{"size":85,"mtime":1613576203582,"results":"28","hashOfConfig":"18"},{"size":1910,"mtime":1613735379761,"results":"29","hashOfConfig":"18"},{"size":908,"mtime":1613642642514,"results":"30","hashOfConfig":"18"},{"size":1543,"mtime":1613735376841,"results":"31","hashOfConfig":"18"},{"size":108,"mtime":1614932811185,"results":"32","hashOfConfig":"18"},{"size":114,"mtime":1614932821865,"results":"33","hashOfConfig":"18"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"1et24kw",{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"41","usedDeprecatedRules":"36"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"36"},"/home/arkady/dev/mesto-react/src/index.js",[],["68","69"],"/home/arkady/dev/mesto-react/src/reportWebVitals.js",[],"/home/arkady/dev/mesto-react/src/components/App.js",["70","71","72"],"import React from 'react'\nimport { Redirect, Route, Switch } from 'react-router-dom';\n\n\nimport Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer'\nimport ImagePopup from './ImagePopup'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport Login from './Login.js';\nimport Register from './Register.js';\n\nimport api from '../utils/api'\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false)\n  function handleEditAvatarClick() {\n    setEditAvatarPopupOpen(true)\n  }\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false)\n  function handleEditProfileClick() {\n    setEditProfilePopupOpen(true)\n  }\n\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false)\n  function handleAddPlaceClick() {\n    setAddPlacePopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setEditAvatarPopupOpen(false)\n    setEditProfilePopupOpen(false)\n    setAddPlacePopupOpen(false)\n    setSelectedCard({})\n  }\n\n  const [selectedCard, setSelectedCard] = React.useState({})\n  function handleCardClick(card) {\n    setSelectedCard(card)\n  }\n\n  const [currentUser, setCurrentUser] = React.useState({\n    avatar:\n      'https://github.com/konjvpaljto/mesto/blob/master/src/images/avatar.jpg?raw=true',\n    name: 'Жак Ив-Кусто',\n    about: 'Исследователь океана',\n  })\n\n  function handleUpdateUser(data) {\n    api\n      .updateUserInfo(data)\n      .then((data) => {\n        setCurrentUser(data)\n      })\n      .then(() => {\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(`Не удалось обновить данные пользователя: ${err}`)\n      })\n  }\n\n  function handleUpdateAvatar(data) {\n    api\n      .setNewAvatar(data.avatar)\n      .then(() => {\n        setCurrentUser({\n          avatar: data.avatar,\n          name: currentUser.name,\n          about: currentUser.about,\n        })\n      })\n      .then(() => {\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(`Не удалось обновить аватар: ${err}`)\n      })\n  }\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((data) => {\n        setCurrentUser(data)\n      })\n      .catch((err) => {\n        console.log(`Не удалось загрузить данные пользователя: ${err}`)\n      })\n  }, [])\n\n  React.useEffect(() => {\n    const onKeypress = (evt) => {\n      if (evt.key === 'Escape') {\n        closeAllPopups()\n        console.log('zhopa')\n      }\n    }\n\n    document.addEventListener('keydown', onKeypress)\n\n    return () => {\n      document.removeEventListener('keydown', onKeypress)\n    }\n  }, [])\n\n  const [cards, setCards] = React.useState([])\n  React.useEffect(() => {\n    api\n      .getInitialCards()\n      .then((data) => {\n        setCards(data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }, [])\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i._id === currentUser._id)\n\n    function updateCards(newCard) {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((c) => (c._id === card._id ? newCard : c))\n      // Обновляем стейт\n      setCards(newCards)\n    }\n\n    if (isLiked) {\n      api\n        .removeCardLike(card._id)\n        .then((newCard) => {\n          updateCards(newCard)\n        })\n        .catch((err) => {\n          console.log(`Не удалось поставить лайк: ${err}`)\n        })\n    } else {\n      api\n        .addCardLike(card._id)\n        .then((newCard) => {\n          updateCards(newCard)\n        })\n        .catch((err) => {\n          console.log(`Не удалось снять лайк: ${err}`)\n        })\n    }\n  }\n\n  function handleCardDelete(card) {\n    const isOwn = card.owner._id === currentUser._id\n    if (isOwn) {\n      api\n        .removeCard(card._id)\n        .then(() => {\n          const newCards = cards.filter((c) => {\n            if (c._id === card._id) {\n              return false\n            } else {\n              return true\n            }\n          })\n          setCards(newCards)\n        })\n        .catch((err) => {\n          console.log(`Не удалось удалить карточку: ${err}`)\n        })\n    } else {\n      console.log(\n        `Не удалось удалить карточку: вы не хозяин. Нечего на скрытые кнопки жать!`\n      )\n    }\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api.addNewCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n      })\n      .then(() => {\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(`Не удалось добавить карточку: ${err}`)\n      })\n\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Switch>\n        <Route path=\"/login\">\n          <div className=\"loginContainer\">\n            <Login  />\n          </div>\n        </Route>\n        <Route path=\"/register\">\n          <div className=\"registerContainer\">\n            <Register />\n          </div>\n        </Route>\n\n        <Route path=\"/\">\n          <div className=\"page\">\n          <Header />\n          <Main\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            cards={cards}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n          />\n          <Footer />\n\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddCard={handleAddPlaceSubmit}\n          />\n          <ImagePopup onClose={closeAllPopups} card={selectedCard} />\n        </div>\n        </Route>\n      </Switch>\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default App\n","/home/arkady/dev/mesto-react/src/components/Header.js",[],"/home/arkady/dev/mesto-react/src/components/Main.js",[],"/home/arkady/dev/mesto-react/src/components/Footer.js",[],"/home/arkady/dev/mesto-react/src/components/PopupWithForm.js",[],"/home/arkady/dev/mesto-react/src/components/ImagePopup.js",[],"/home/arkady/dev/mesto-react/src/components/Card.js",[],"/home/arkady/dev/mesto-react/src/utils/api.js",[],"/home/arkady/dev/mesto-react/src/contexts/CurrentUserContext.js",[],"/home/arkady/dev/mesto-react/src/components/EditProfilePopup.js",[],"/home/arkady/dev/mesto-react/src/components/EditAvatarPopup.js",[],"/home/arkady/dev/mesto-react/src/components/AddPlacePopup.js",[],"/home/arkady/dev/mesto-react/src/components/Login.js",[],"/home/arkady/dev/mesto-react/src/components/Register.js",[],{"ruleId":"73","replacedBy":"74"},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","severity":1,"message":"78","line":2,"column":10,"nodeType":"79","messageId":"80","endLine":2,"endColumn":18},{"ruleId":"77","severity":1,"message":"81","line":25,"column":10,"nodeType":"79","messageId":"80","endLine":25,"endColumn":18},{"ruleId":"77","severity":1,"message":"82","line":25,"column":20,"nodeType":"79","messageId":"80","endLine":25,"endColumn":31},"no-native-reassign",["83"],"no-negated-in-lhs",["84"],"no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","'loggedIn' is assigned a value but never used.","'setLoggedIn' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]